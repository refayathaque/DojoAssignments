<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Message Board</title>
  </head>
  <body>
    <h1>Message Board</h1>
    <form action="/messages" method="post">
      <p>Name:</p>
      <p><input type="text" name="name" required></p>
      <p>Content:</p>
      <p><input type="text" name="content" required></p>
      <!-- Required is part of front-end validation -->
      <p><input type="submit" value="Post Message"></p>
      <hr>
    </form>

      <% for (var i in messages){ %>
        <h3>Name: <%= messages[i].name %></h3>
        <p>Message: <%= messages[i].content %></p>
        <% for (var j = 0; j < messages[i].comments.length; j++){ %>
          <p>Name: <%= messages[i].comments[j].name %></p>
          <p>Comment: <%= messages[i].comments[j].content %></p>
        <% } %>

        <form action="/messages/<%= messages[i]._id %>/comments" method="post">
          <p>Name:</p>
          <p><input type="text" name="name" required></p>
          <p>Comment Content:</p>
          <p><input type="text" name="content" required></p>
          <!-- Required is part of front-end validation -->
          <p><input type="submit" value="Post Message"></p>
        </form>
      <% } %>

  </body>
</html>
